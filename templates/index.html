<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sicily Airbnb Search</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Filters Sidebar -->
            <div class="col-md-3 sidebar">
                <h3>Filters</h3>
                <div class="filters-container">
                    <div class="filter-section">
                        <label>Similarity Metric</label>
                        <select id="similarity-metric" class="form-select">
                            {% for metric in similarity_metrics %}
                            <option value="{{ metric }}">{{ metric|title }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Numeric Range Filters -->
                    {% for field, range in numeric_ranges.items() %}
                    <div class="filter-section">
                        <label>{{ field|replace('_', ' ')|title }}</label>
                        <div class="range-inputs">
                            <input type="number" 
                                   id="{{ field }}-min" 
                                   class="form-control" 
                                   placeholder="Min" 
                                   min="{{ range.min }}" 
                                   max="{{ range.max }}"
                                   step="{% if field == 'price' %}0.01{% else %}1{% endif %}">
                            <input type="number" 
                                   id="{{ field }}-max" 
                                   class="form-control" 
                                   placeholder="Max" 
                                   min="{{ range.min }}" 
                                   max="{{ range.max }}"
                                   step="{% if field == 'price' %}0.01{% else %}1{% endif %}">
                        </div>
                    </div>
                    {% endfor %}

                    <!-- Categorical Filters -->
                    {% for field, options in filters.items() %}
                    {% if field != 'amenities' %}
                    <div class="filter-section">
                        <label>{{ field|replace('_', ' ')|title }}</label>
                        <select id="{{ field }}" class="form-select">
                            <option value="">Any</option>
                            {% for option in options %}
                            <option value="{{ option }}">{{ option }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    {% endif %}
                    {% endfor %}

                    <!-- Amenities -->
                    <div class="filter-section">
                        <label>Amenities</label>
                        <div class="amenities-container">
                            {% for amenity in filters.amenities %}
                            <div class="form-check">
                                <input class="form-check-input amenity-checkbox" 
                                       type="checkbox" 
                                       value="{{ amenity }}" 
                                       id="amenity-{{ loop.index }}">
                                <label class="form-check-label" for="amenity-{{ loop.index }}">
                                    {{ amenity }}
                                </label>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 main-content">
                <!-- Photo Carousel -->
                <div class="carousel-container">
                    <div id="photoCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            {% for photo in photos %}
                            <div class="carousel-item {% if loop.first %}active{% endif %}">
                                <img src="{{ url_for('static', filename='Sicily_photo/' + photo) }}" 
                                     class="d-block w-100" 
                                     alt="Sicily">
                            </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#photoCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#photoCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>

                <!-- Search Bar -->
                <div class="search-container mb-4">
                    <input type="text" id="search-input" class="form-control" placeholder="Search for Airbnb listings...">
                    <button id="search-button" class="btn btn-primary">Search</button>
                </div>

                <!-- Results Container -->
                <div id="results-container" class="row">
                    <!-- Results will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
